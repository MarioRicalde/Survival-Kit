// Survival âœš Kit

// Horizontal Navigation Low-level Method.
// 
// It's meant to be called from other predifined mixins to avoid calling so many variables per call. 
// Used from ul/ol
@mixin horizontal-navigation(
    $height,
    $color,
    $hover-color,
    $active-color,
    $text-shadow,
    $bg,
    $bg-hover,
    $bg-active,
    $box-shadow,
    $box-shadow-hover,
    $box-shadow-active,
    $border-left,
    $border-right,
    $padding,
    $margin,
    $border-radius,
    $font-weight,
    $font-size,
    $tab-space // Sets a tabbing space. 
  ) {
  @if $bg == none { $bg:transparent;}
	@if $bg-active == auto { $bg-active:$bg-hover; }
	@if $active-color == auto { $active-color:$hover-color; }
  
  // Border Calculation
  // ----------------------------------------
  // Check if borders are set to anything but none / auto.
  @if $border-left != none and $border-right != none and $border-left != auto and $border-right != auto {
    // Borders where explicitly set.
    @include _sk-nav-borders($border-left, $border-right);
  } @else if $border-left == auto and $border-right == auto and $bg != transparent{
    // Borders calculated magically.
    @include _sk-nav-borders(lighten($bg, 10%), darken($bg, 10%));
  }
  
  height:$height; // instead of clearfix, to keep shadows alive.
  margin: 0;
  list-style:none;
  
  // Links and input
  li, a {
    display:block;
    float:left;  // this can make it inline or block level.
    line-height:$height;
  }
  
  
  a {
    font-weight: $font-weight;
    padding:$padding;
    margin:$margin;
    font-size:$font-size;
    text-decoration:none;
    color:$color;
    
    @if $bg != transparent {
      background:$bg;
    }
    
    @if $box-shadow != none {
      @include box-shadow($box-shadow);
    }
    
    @if $text-shadow != none {
      @include text-shadow($text-shadow, 1px, 1px, 1px);
    }
    
    @if $border-radius != none {
      @include border-radius($border-radius);
    }
    
    // Feature for tabs.
    @if $tab-space != 0 {
      margin-top: -($tab-space);
    }
    
    // States
    // ----------------------------------------
    
    &:hover{
      @include _sk-nav-effects($hover-color, $bg-hover, $text-shadow, $box-shadow-hover, $bg-hover);
      text-decoration:none;
    }

    &.active {
      @include _sk-nav-effects($active-color, $bg-active, $text-shadow, $box-shadow-active, $bg-hover);
      // Add tab space.
      @if $tab-space != 0 {
        height:$height + $tab-space;
      }
    }
  }
}

// Mixin used to generate Background effects by the horizontal-navigation mixin.
@mixin _sk-nav-effects($color, $bg, $text-shadow, $box-shadow, $bg-hover) {
	@if $color != auto {
	  color:$color;
	}
  @if $bg != transparent {
    @if $bg-hover == auto {
       background:darken($bg,3%); 
    } @else {
      background:$bg;
    }
    @if $box-shadow != none{
      @include box-shadow($box-shadow);
    }
  }
  // Remove the text shadow of hover.
  @if $text-shadow != none {
    @include text-shadow(none);
  }
}

// Low level mixin.
// Invoked by other mixins.
// 
// @var $left the left border.
// @var $right the right border
@mixin _sk-nav-borders($left, $right) {
  li:first-child, li.first {
    border-left:1px solid $right;
  }// li:first-child
  li:last-child, li.last {
    border-right:1px solid $left;
  }
  a {
    border:{
      left: 1px solid $left;
      right: 1px solid $right;
    };
    &.active, &.active:hover {
      border:{
        right:1px solid transparent;
        left:1px solid transparent;
      };
    }
    &:hover {
      border:{
        right:1px solid transparent;
        left:1px solid transparent;
      };
    }
  }
}
